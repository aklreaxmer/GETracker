<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>UC Davis GE Tracker</title>

 
  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->


</head>

<body>
  <div>
    Welcome to UCD GE Tracker. Follow the instructions below.<br>
    1. Select the text below and drag it into your bookmarks bar.<br>
    <small>javascript:(function()%7Bparse()%3Bfunction%20parse()%20%7Bvar%20courses%20%3D%20document.getElementsByClassName(%22GE3%22)%3Bvar%20courseArray%20%3D%20new%20Array(courses.length)%3Bfor(var%20i%20%20%3D%200%3B%20i%20%3C%20courseArray.length%3B%20i%2B%2B)%20%7BcourseArray%5Bi%5D%20%3D%20new%20Course(courses%5Bi%5D.parentElement.parentElement.getElementsByClassName(%22CourseName%22)%5B0%5D.innerText%2CparseInt(courses%5Bi%5D.parentElement.parentElement.getElementsByClassName(%22column-units%22)%5B0%5D.innerText)%2Ccourses%5Bi%5D.innerText.includes('SE')%2Ccourses%5Bi%5D.innerText.includes('SS')%2Ccourses%5Bi%5D.innerText.includes('WE')%2Ccourses%5Bi%5D.innerText.includes('VL')%2Ccourses%5Bi%5D.innerText.includes('ACGH')%2Ccourses%5Bi%5D.innerText.includes('DD')%2Ccourses%5Bi%5D.innerText.includes('WC')%2Ccourses%5Bi%5D.innerText.includes('QL')%2Ccourses%5Bi%5D.innerText.includes('SL'))%3B%7Dsend(courseArray)%3B%7Dfunction%20send(data)%20%7Bwindow.opener.postMessage(data%2C%20%22https%3A%2F%2Faklreaxmer.github.io%22)%3B%7Dfunction%20Course(_name%2C%20_units%2C%20_AH%2C%20_SE%2C%20_SS%2C%20_WE%2C%20_VL%2C%20_ACGH%2C%20_DD%2C%20_WC%2C%20_QL%2C%20_SL)%20%7Bthis.name%20%3D%20_name%3Bthis.units%20%3D%20_units%3Bthis.AH%20%3D%20_AH%3Bthis.SE%20%3D%20_SE%3Bthis.SS%20%3D%20_SS%3Bthis.WE%20%3D%20_WE%3Bthis.VL%20%3D%20_VL%3Bthis.ACGH%20%3D%20_ACGH%3Bthis.DD%20%3D%20_DD%3Bthis.WC%20%3D%20_WC%3Bthis.QL%20%3D%20_QL%3Bthis.SL%20%3D%20_SL%3B%7D%7D)()
    </small><br>
    2. Click the button 'Open OASIS'<br>
    3. While you are on the OASIS course list, click on the bookmark you just created.<br>
    4. Courses will be added to the proper GE tables. If a course satisfies multiple GEs....<br><br>
  </div>
	<button onClick="openOasis()">OASIS</button><br>
  <script>

  function openOasis() {
  	window.open("https://students.ucdavis.edu/student/courses.aspx");
  }
  
  function processCourses(courses) {
 		makeTable("AH", 5, courses);
  }

  window.onload = function() {
  	  window.addEventListener('message', function(e) {
  	  var courses = e.data;
  	  processCourses(courses);
	  window.alert("Courses imported.");
	});
  }

  function makeTable(title, numCourses, courses){
    var body = document.body,
    tbl  = document.createElement('table');
    tbl.style.border = '1px solid black';
    tbl.style.tableLayout = 'auto';
    var tr = tbl.insertRow();
    var titleCell = tr.insertCell();
    titleCell.appendChild(document.createTextNode(title));
    var unitsCell = tr.insertCell();
    unitsCell.appendChild(document.createTextNode("Units"));
    titleCell.style.fontSize = '1.5em';
    titleCell.style.fontWeight = 'bold';
    unitsCell.style.fontSize = '1.5em';
    unitsCell.style.fontWeight = 'bold';
    for(var i = 0; i < numCourses; i++){
      
        var trName = tbl.insertRow();
        var tdName = trName.insertCell();
        tdName.appendChild(document.createTextNode(courses[i].units));
        tdName.style.border = '1px solid black';
   

        var trUnits = tbl.insertRow();
        var tdUnits = trUnits.insertCell();
        tdUnits.appendChild(document.createTextNode(courses[i].name));
        tdUnits.style.border = '1px solid black'; 

    }
    body.appendChild(tbl);
}

</script>

</body>
</html>